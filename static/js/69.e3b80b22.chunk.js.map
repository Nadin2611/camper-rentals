{"version":3,"file":"static/js/69.e3b80b22.chunk.js","mappings":"+PA4EA,UAxDoB,WAClB,IAAMA,GAAWC,EAAAA,EAAAA,MACjBC,GAAsCC,EAAAA,EAAAA,UAAS,GAAEC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA1CI,EAAWF,EAAA,GAAEG,EAAcH,EAAA,GAClCI,GAAgDL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAArDE,EAAgBD,EAAA,GAAEE,EAAmBF,EAAA,GAC5CG,GAAwCT,EAAAA,EAAAA,WAAS,GAAKU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAA/CE,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GACpCG,GAA0Cb,EAAAA,EAAAA,WAAS,GAAMc,GAAAZ,EAAAA,EAAAA,GAAAW,EAAA,GAAlDE,EAAaD,EAAA,GAAEE,EAAgBF,EAAA,GAChCG,GAAYC,EAAAA,EAAAA,IAAYC,EAAAA,IACxBC,GAAeC,EAAAA,EAAAA,QAAO,MAEtBC,GAAUJ,EAAAA,EAAAA,IAAYK,EAAAA,IACtBC,GAAYN,EAAAA,EAAAA,IAAYO,EAAAA,IACxBC,GAAQR,EAAAA,EAAAA,IAAYS,EAAAA,KAE1BC,EAAAA,EAAAA,YAAU,WACR/B,GAASgC,EAAAA,EAAAA,GAAW1B,GACtB,GAAG,CAACN,EAAUM,KAEdyB,EAAAA,EAAAA,YAAU,WACJN,EAAQQ,OAAS,IACnBtB,GAAoB,SAAAuB,GAAW,SAAAC,QAAAC,EAAAA,EAAAA,GAAQF,IAAWE,EAAAA,EAAAA,GAAKX,GAAO,IAC9DN,GAAiB,GAErB,GAAG,CAACM,IAYJ,OACEY,EAAAA,EAAAA,MAACC,EAAAA,GAAoB,CAAAC,SAAA,EACnBC,EAAAA,EAAAA,KAACC,EAAAA,EAAM,KACPJ,EAAAA,EAAAA,MAACK,EAAAA,GAAO,CAACC,IAAKpB,EAAagB,SAAA,EACzBC,EAAAA,EAAAA,KAACI,EAAAA,EAAU,CAACnB,QAASf,IAEpBI,IAAiBe,IAChBW,EAAAA,EAAAA,KAACK,EAAAA,EAAW,CACVC,KAAK,SACLC,QAnBa,WACjBzC,GAAec,EACjBL,GAAgB,IAGlBI,GAAiB,GACjBZ,GAAe,SAAAyC,GAAQ,OAAIA,EAAW,CAAC,KACvCC,EAAAA,EAAAA,IAAa1B,EAAa2B,SAC5B,EAYUC,SAAUjC,EAAcqB,SAEvBrB,EAAgB,aAAe,cAGnCS,IAAaa,EAAAA,EAAAA,KAACY,EAAAA,EAAM,IACpBvB,IAASQ,EAAAA,EAAAA,MAAA,KAAAE,SAAA,CAAG,UAAQV,UAI7B,C","sources":["pages/CatalogPage.jsx"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getAdverts } from '../redux/adverts/operations';\nimport {\n  selectAdverts,\n  selectAdvertsError,\n  selectAdvertsLoading,\n  selectTotalPages,\n} from '../redux/adverts/selectors';\nimport { handleScroll } from '../services';\n\nimport AdvertList from 'components/AdvertCatalog/AdvertList';\nimport {\n  CatalogPageContainer,\n  Wrapper,\n} from 'components/Container/Container.styled';\nimport Filter from 'components/Filter';\nimport Loader from 'components/Loader';\nimport { LoadMoreBtn } from 'components/Button/Button.styled';\n\nconst CatalogPage = () => {\n  const dispatch = useDispatch();\n  const [currentPage, setCurrentPage] = useState(1);\n  const [displayedAdverts, setDisplayedAdverts] = useState([]);\n  const [showLoadMore, setShowLoadMore] = useState(true);\n  const [isLoadingMore, setIsLoadingMore] = useState(false);\n  const totalPage = useSelector(selectTotalPages);\n  const containerRef = useRef(null);\n\n  const adverts = useSelector(selectAdverts);\n  const isLoading = useSelector(selectAdvertsLoading);\n  const error = useSelector(selectAdvertsError);\n\n  useEffect(() => {\n    dispatch(getAdverts(currentPage));\n  }, [dispatch, currentPage]);\n\n  useEffect(() => {\n    if (adverts.length > 0) {\n      setDisplayedAdverts(prevAdverts => [...prevAdverts, ...adverts]);\n      setIsLoadingMore(false);\n    }\n  }, [adverts]);\n\n  const handleLoadMore = () => {\n    if (currentPage >= totalPage) {\n      setShowLoadMore(false);\n      return;\n    }\n    setIsLoadingMore(true);\n    setCurrentPage(prevPage => prevPage + 1);\n    handleScroll(containerRef.current);\n  };\n\n  return (\n    <CatalogPageContainer>\n      <Filter />\n      <Wrapper ref={containerRef}>\n        <AdvertList adverts={displayedAdverts} />\n\n        {showLoadMore && !error && (\n          <LoadMoreBtn\n            type=\"button\"\n            onClick={handleLoadMore}\n            disabled={isLoadingMore}\n          >\n            {isLoadingMore ? 'Loading...' : 'Load more'}\n          </LoadMoreBtn>\n        )}\n        {isLoading && <Loader />}\n        {error && <p>Error: {error}</p>}\n      </Wrapper>\n    </CatalogPageContainer>\n  );\n};\n\nexport default CatalogPage;\n"],"names":["dispatch","useDispatch","_useState","useState","_useState2","_slicedToArray","currentPage","setCurrentPage","_useState3","_useState4","displayedAdverts","setDisplayedAdverts","_useState5","_useState6","showLoadMore","setShowLoadMore","_useState7","_useState8","isLoadingMore","setIsLoadingMore","totalPage","useSelector","selectTotalPages","containerRef","useRef","adverts","selectAdverts","isLoading","selectAdvertsLoading","error","selectAdvertsError","useEffect","getAdverts","length","prevAdverts","concat","_toConsumableArray","_jsxs","CatalogPageContainer","children","_jsx","Filter","Wrapper","ref","AdvertList","LoadMoreBtn","type","onClick","prevPage","handleScroll","current","disabled","Loader"],"sourceRoot":""}